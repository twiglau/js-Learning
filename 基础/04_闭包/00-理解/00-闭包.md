# JS中闭包

## 定义

- 这里先来看闭包的定义:
  -闭包(Closure): 又称词法闭包(Lexical Closure) 或 函数闭包(function closures)
  -是在支持 头等函数 的编程语言中, 实现词法绑定的一种技术;
  -闭包在实现上是一个结构体, 它存储了一个函数和一个关联的环境(相当于一个符号查找表);
  -闭包跟函数最大的区别在于, 当捕捉闭包的时候,它的 自由变量 会在补充时被确定, 这样即使脱离了捕捉时的上下文,它也能照常运行
- 闭包的概念出现于60年代, 最早实现闭包的程序是 Scheme, 那么我们就可以理解为什么JavaScript中有闭包:
  -因为JavaScript中有大量的设计是来源于Scheme的;
- 再来看下MDN对JavaScript闭包的解释:
  -一个函数和对其周围状态(lexical environment, 词法环境)的引用捆绑在一起(或者说函数被引用包围), 这样的组合就是闭包(closure);
  -也就是说,闭包让你可以在一个内层函数中访问到其外层函数的作用域;
  -在JavaScript中,每当创建一个函数,闭包就会在函数创建的同时被创建出来;

## 总结

- 一个普通的函数function, 如果它可以访问外层作用域的自由变量, 那么这个函数就是一个闭包;
- 从广义的角度来说: JavaScript中的函数都是闭包
- 从狭义的角度来说: JavaScript中一个函数, 如果访问了外层作用域的变量, 那么它是一个闭包

## 内存泄漏