<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>使用代理评估性能</title>
		<link rel="stylesheet" href="../assert.css">
		<script src="../assert.js"></script>
	</head>
	<body>
		<script>
			function isPrime(number){
				if(number < 2) { return false;}
				for(let i = 2; i < number; i++){
					if(number % i === 0) { return false; }
				} //定义isPrime函数的简单实现
				return true;
			}
			isPrime = new Proxy(isPrime, {
				//使用代理包装isPrime方法
				apply: (target,thisArg,args) => {
					//定义 apply 方法, 当代理对象作为函数被调用时将会触发该apply方法的执行
					console.time("isPrime");//启动一个计时器, 记录isPrime函数执行的起始时间

					const result = target.apply(thisArg,args); //调用目标函数

					console.timeEnd("isPrime"); //停止计时器的执行并输出结果

					return result;
				}
			});
			isPrime(1299827);//同调用原始方法一样,调用isPrime方法
		</script>
	</body>
</html>
